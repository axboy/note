# OAuth2

## 角色

- Resource Owner
- Resource Server
- Client
- Authorization Server

## 授权类型
- 授权码

```
1. 用户访问客户端，客户端将用户导向认证服务器
2. 用户选择是否给与客户端授权
3. 如果用户给与授权，认证服务器将用户导向客户端事先指定的URI，并附上授权码
4. 客户端收到授权码，并附上指定URI，想认证服务器申请token（客户端后台操作，用户不可见）
5. 认证服务器授权码和URI，向客户端发送access token和refresh token
```

- 简化类型

```
1. 用户访问客户端，客户端将用户导向认证服务器
2. 用户选择是否给与客户端授权
3. 如果用户给与授权，认证服务器将用户导向客户端事先指定的URI，并在hash部分提供访问令牌
4. 浏览器向资源服务器发送请求，返回一个网页，可用其中的代码获取hash中的token
5. 提取token，发送给客户端
```

- 密码类型

```
1. 用户向客户端提供用户名和密码。
2. 客户端将用户名和密码发给认证服务器，向后者请求令牌。
3. 认证服务器确认无误后，向客户端提供访问令牌。
```

- 客户端类型

```
1. 客户端向认证服务器进行身份认证，并要求一个访问令牌。
2. 认证服务器确认无误后，向客户端提供访问令牌。
```